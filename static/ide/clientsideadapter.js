/* Copyright 2018, SiteSpect, Inc. All Rights Reserved. */
(function(e,t){var n=e.document;var r=e.SS||{};e.SS=r;var i=e.encodeURIComponent;r.Cookie=function(){var t="\v";function r(t,n,r,o,a,f){var u;if(!r||r.toString().substr(0,1)!==";"){if(!f){f="/"}if(!a){a=e.location.hostname.match(/^[\d.]+|(?:\.[\da-z\-]+)*[\da-z\-]+\.[\da-z\-]+$/i)[0]}if(a.substr(0,1)!=="."){a="."+a}o=!o?"":";secure";if(r!=null){r=parseInt(r,10);if(isNaN(r)){r=0}r=";expires="+new Date(+new Date+r).toUTCString()}u=";path="+f+";domain="+a+r+o}else{u=r}return i(t)+"="+i(n)+u}function o(e,t){e=" "+e+"=";t=" "+t+";";var n=t.indexOf(e);if(n>=0){n+=e.length;return decodeURIComponent(t.substring(n,t.indexOf(";",n)))}return""}function a(e){return e.split(t)}function f(e){return e.join(t)}function u(e,r){if(!e){return}var i=o(e,n.cookie);if(!i){return""}if(r){r=r.substr(0,1).toLowerCase()}switch(r){case"s":return i;case"a":return a(i);default:return i.match(t)?a(i):i}}function c(e,t,i,o,a,u){if(!e||/^(?:expires|max-age|path|domain|secure|HttpOnly)$/i.test(e)){return}if(typeof t==="object"){t=f(t)}n.cookie=r(e,t,i,o,a,u)}return{get:u,set:c}}();r.JSEvents=function(){function t(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}}function r(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}}function i(t){if(!t){t=e.event}var r=t.target||t.srcElement||n;if(r.nodeType===3){r=r.parentNode}return r}function o(r){var i=false,o=false,a,f;a=function(){if(!i){if(!n.body){return setTimeout(a,1)}i=true;r()}};if(n.addEventListener){f=function(){n.removeEventListener("DOMContentLoaded",f,false);a()};n.addEventListener("DOMContentLoaded",f,false)}else if(n.attachEvent){f=function(){if(n.readyState==="complete"){n.detachEvent("onreadystatechange",f);a()}};n.attachEvent("onreadystatechange",f);try{o=e.frameElement===null}catch(u){}if(n.documentElement.doScroll&&o){(function c(){if(i){return}try{n.documentElement.doScroll("left")}catch(e){setTimeout(c,1);return}a()})()}}t(e,"load",a)}return{on:t,off:r,trgt:i,ready:o}}();r.TimerFactory=function(){function e(){var e=-1,t=-1;function n(t){e=(t||new Date).getTime();return e>0}function r(){t=(new Date).getTime();return t>0}function i(){e=-1;t=-1}function o(){if(e<=0){throw"Failure to Start Timer"}if(t<=0){throw"Failure to Stop Timer"}if(e>t){throw"Failure to Reset Timer"}return(t-e)/1e3}return{start:n,stop:r,reset:i,diff:o}}function t(){return new e}return{get:t}}();r.EventTrack=function(){var t=e.location.host,r=e.location.protocol,o="/__ssobj/track",a=Math.floor(Math.random()*99999999),f=[];function u(e){f.push(e)}function c(e){e+="-3";var t=n.createElement("img");t.src=e;t.id="SS.IMG"+a;t.style.width="0px";t.style.height="0px";n.body.appendChild(t);u(t)}function s(n,f){var u=(new Date).getTime()+a,c=[],s;if(typeof n==="object"){for(s=0;s<n.length;s++){n[s]="event"+s+"="+i(n[s])}n=n.join("&")}else{n="event="+i(n)}if(f&&typeof f==="object"){for(s in f){if(f.hasOwnProperty(s)){c[c.length]="value_"+i(s)+"="+i(f[s])}}f=c.join("&")}else{f="value="+i(f!==null?f:"")}var l=o+"?"+n+"&"+f+"&x="+u;var d=r!==e.location.protocol;if(m()||d){l="//"+t+l;if(d){l=r+l}}return l}function l(e){var n=e.match(/^(?:(https?:)?\/\/)?([^\/]+)/);if(!n){return}var i=n[1];var o=n[2];t=o;r=i||r}function d(t,n){t+="-1";var r;try{r=e.ActiveXObject?new e.ActiveXObject("Microsoft.XMLHTTP"):new e.XMLHttpRequest;r.open("GET",t,!n)}catch(i){return false}try{r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.setRequestHeader("Accept","*/*")}catch(o){}try{r.send(null)}catch(a){if(a.number&65535!==1223){return false}}r.onreadystatechange=function(){v(r,this,0)};u(r);return true}function v(t,n,r){if(typeof e.__ssmMetricResponseReadyChange==="undefined"&&r<5){setTimeout(function(){v(t,n,r+1)},1e3)}else{if(typeof e.__ssmMetricResponseReadyChange!=="undefined"){e.__ssmMetricResponseReadyChange.forEach(function(e){e(t,n)})}}}function h(e){e+="-2";var t=new Image;t.src=e;u(t)}function m(){return t!==e.location.host}function p(e,t,n){var i=s(e,t);if(m()||!d(i,n)){if(r==="https:"){c(i)}else{h(i)}}}return{metric:p,rp:p,rpAsync:function(e,t){p(e,t,false)},rpSync:function(e,t){p(e,t,true)},r:f,setDomain:l}}();r.PageTimer=function(){var t=r.JSEvents,n,i;function o(e,t){var o=false;return function(){if(i&&!o){o=true;if(n.stop()){try{var a=n.diff();if(a<=1795){r.EventTrack.rp(e,a,t)}}catch(f){}}}}}function a(a,f,u){n=r.TimerFactory.get();i=n.start(u);if(i){var c=false;if(a==="ready"){t.ready(o(f,false));c=true}else if(a==="load"){t.on(e,"load",o(f,false));c=true}else if(a==="dwell"){t.on(e,"unload",o(f,true));c=true}else if(a==="abandon"){unloadEvent=o(f,true);t.on(e,"unload",unloadEvent);t.on(e,"load",function(){t.off(e,"unload",unloadEvent)});c=true}return c}else{return false}}return{time:a}}();r.Debug=function(){function t(t){e.addEventListener("error",n,false)}function n(e){var t=e.filename;if(t.match(/scripterror/i)){t="externaljsfile"}r.EventTrack.rp("js-error",{path:e.filename,line:e.lineno,error:e.message})}return{trackJSErrors:t}}()})(this);
/* Copyright 2017, SiteSpect, Inc. All Rights Reserved. */
var ss_dom_var=function(){"use strict";var MAX_APPLICATIONS=1e3;var THROTTLE_TIME=1e3;var variations=[];var timestamps={};var checkCriteria;var asmtRequest;var asmtCallback;var is_ve_edit_mode=false;var ignore_variation_mutations=false;var pause_variations=false;var variationWatchers=[];var variations_applied={};var variations_by_target=[];var target_indices=[];var observer;var counted_tcs={};var observer_options={childList:true,attributes:true,characterData:true,subtree:true};var flag_attr="data-ss-variation-applied";var case_insensitive_comment="(?#i)";var asmtCallbackDefault=function(t){var e=window.SS||{};e.getAsmtData=function(){return t};window.SS=e};asmtCallbackDefault();var applySingleVariation=function(){try{observer=new MutationObserver(mutationsOccurred)}catch(t){}function mutationsOccurred(t){t.forEach(function(t){var e=getNormalizedMutationTarget(t.target);if(!ignore_variation_mutations&&document.body.contains(e)){var i=findVariationsForTarget(e);if(i){i.forEach(function(t){executeVariation(e,t)})}}});cleanup()}function getNormalizedMutationTarget(t){var e;var i=t;while(i){if(i.nodeType===Node.ELEMENT_NODE){e=e||i;if(i.getAttribute(flag_attr)||target_indices.indexOf(t)>-1){return i}}i=i.parentNode}return e}function cleanup(){target_indices.forEach(function(t,e){if(!document.querySelector("["+flag_attr+'="'+e+'"]')){delete target_indices[e];delete variations_by_target[e]}})}function applyHtmlChange(t,e){t.innerHTML=e}function applyCssChange(t,e){Object.keys(e).forEach(function(i){t.style[i]=e[i]})}function applyAttributesChange(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function applyCustomChange(target,code){try{var customFunc,funcCode="customFunc = function () {"+code+"}";eval(funcCode);customFunc.apply(target)}catch(t){return false}}function applyVariation(t){if(!t.selector){return 0}if(!checkCriteria(t)){return 0}var e=document.querySelectorAll(t.selector);var i=0;var a;for(a=0;a<e.length;a++){i+=registerVariation(e[a],t)}return i}function findVariationsForTarget(t){var e=t.getAttribute(flag_attr);if(e===null){e=target_indices.indexOf(t);if(e===-1){e=target_indices.length;target_indices[e]=t;if(observer&&!ignore_variation_mutations){observer.observe(t,observer_options)}}t.setAttribute(flag_attr,e)}var i=variations_by_target[e];if(!i){i=variations_by_target[e]=[]}return i}function registerVariation(t,e){var i=findVariationsForTarget(t);if(i.indexOf(e)===-1){i.push(e);return executeVariation(t,e)}return 0}function executeVariation(t,e){if(!checkCriteria(e)){return}var i;var a=(new Date).getTime();var r=0;if(pause_variations){return}while(r<e.applied.length&&e.applied[r]+THROTTLE_TIME<a){r++}e.applied.push(a);if(r){e.applied.splice(0,r)}if(e.applied.length>=MAX_APPLICATIONS){console.warn("Possible infinite loop detected, aborting");return 0}if(is_ve_edit_mode){i=t.ss_revert||t.cloneNode(true)}if(e.html){applyHtmlChange(t,e.html)}if(e.css){applyCssChange(t,e.css)}if(e.attributes){applyAttributesChange(t,e.attributes)}if(e.custom){applyCustomChange(t,e.custom)}if(t.hasAttribute("data-sspvid")){var n=document.querySelector(e.selector);if(e.custom&&!n&&e.attributes["data-sspvid"]){n=document.querySelector('[data-sspvid="'+e.attributes["data-sspvid"]+'"]')}if(n){if(e.custom){var o=["data-sspvid","data-ss-sole-change","data-sspv-control","data-ss-fe-edit-type","data-ss-display-name","data-ss-orig-order","data-ssmid","data-ss-metric-name"];o.forEach(function(e){if(t.hasAttribute(e)){n.setAttribute(e,t.getAttribute(e))}});var s=Array.prototype.slice.call(t.attributes).filter(function(t){return t.name.match(/^data-ss-(?:control-)?reference-node-/)});s.forEach(function(t){n.setAttribute(t.name,t.value)})}if(is_ve_edit_mode){if(i){n.ss_revert=i}if(typeof __ssedit!=="undefined"){__ssedit.outlineEdited(n)}}if(!n.hasAttribute(flag_attr)&&t.hasAttribute(flag_attr)){n.setAttribute(flag_attr,t.getAttribute(flag_attr));var c=target_indices.indexOf(t);if(c>-1){target_indices[c]=n}if(observer&&!ignore_variation_mutations){observer.observe(n,observer_options)}}}}if(observer){observer.takeRecords()}return 1}function setVariationPreview(t,e){variations_applied[t]=variations_applied[t]||0;variations_applied[t]+=e;var i="#ssp_history_panel .ss_csf_applied_"+t;var a=document.querySelectorAll(i);for(var r=0;r<a.length;r++){if(variations_applied[t]){a[r].style.display="block"}else{a[r].style.display="none"}}}return function(t){var e=0;e=applyVariation(t);if(e){if(!t.counted&&t.trigger_counted&&!counted_tcs[t.campaign_id]){t.counted=true;counted_tcs[t.campaign_id]=true}if(typeof asmtCallback!=="function"){asmtCallback=asmtCallbackDefault}asmtRequest(asmtCallback,counted_tcs)}setVariationPreview(t.id,e);return e}}();function applyVariations(t){if(!(t instanceof Array)){t=variations}var e=t.map(applySingleVariation).reduce(function(t,e){return t+e},0);return e}function removeRegexComments(t){return t.replace(/\(\?#[^)]*\)/g,"")}function createRegex(t){var e=t.indexOf(case_insensitive_comment)!==-1?"i":"";var i=removeRegexComments(t);return new RegExp(i,e)}checkCriteria=function(){function checkCriterionCustom(criterion){try{var customFunc,funcCode="customFunc = function () {"+criterion.script_criterion+"}";eval(funcCode);return customFunc()}catch(t){return false}}function checkCriterionHash(t){return!!document.location.hash.match(createRegex(t.hash_criterion))}function checkCriterionHashQuery(t){var e=document.location.hash.indexOf("?")+1,i=[];if(e){i=document.location.hash.substring(e).split("&")}return checkForKeyValuePair(t.hashquery_name_criterion,t.hashquery_value_criterion,i)}function checkCriterionPath(t){return!!document.location.pathname.match(createRegex(t.path_criterion))}function checkCriterionQuery(t){var e=document.location.search.substring(1).split("&");return checkForKeyValuePair(t.query_name_criterion,t.query_value_criterion,e)}function checkForKeyValuePair(t,e,i){var a=createRegex(t),r=createRegex(e),n,o,s;for(n=0;n<i.length;n++){o=i[n].split("=");if(o.shift().match(a)){s=o.join("=");if(s.match(r)){return true}}}return false}return function(t){var e,i,a={Path:checkCriterionPath,Hash:checkCriterionHash,Query:checkCriterionQuery,HashQuery:checkCriterionHashQuery,Custom:checkCriterionCustom};for(e=0;e<t.criteria.length;e++){i=t.criteria[e];if(!(a[i.Type]&&a[i.Type](i))){return false}}return true}}();asmtRequest=engineRequest("/__ssobj/asmt_update");function engineRequest(t){var e,i=100,a,r;function n(){c();var e=JSON.stringify(a),i=new XMLHttpRequest;i.open("POST",t);i.setRequestHeader("Context-Type","application/json;charset=UTF-8");i.addEventListener("load",o,false);i.send(e)}function o(t){var e;try{e=JSON.parse(t.target.response);if(typeof r==="function"){r(e)}trackingPreviewLoaded(e,0)}catch(t){}}function s(t){if(t&&e){c()}else if(e){return}e=setTimeout(n,i)}function c(){clearTimeout(e);e=null}return function(t,i){r=t;a=i;if(!e){s()}}}function trackingPreviewLoaded(t,e){if(typeof window.__sscCSFCountStatusChange==="undefined"&&e<5){setTimeout(function(){trackingPreviewLoaded(t,e+1)},1e3)}else{if(typeof window.__sscCSFCountStatusChange!=="undefined"){window.__sscCSFCountStatusChange.forEach(function(e){e(t)})}}}function setIgnoreVariationMutationsOnDelay(t){setTimeout(function(){ignore_variation_mutations=!!t.is_ve_edit_mode},5e3)}function setVariations(t){if(t){variations=t.variations||variations;timestamps=t.timestamps||timestamps;setIgnoreVariationMutationsOnDelay(t);is_ve_edit_mode=!!t.is_ve_edit_mode}variations.forEach(function(t){t.applied=t.applied||[]});variationWatchers.forEach(function(t){t(variations)})}function registerVariationWatcher(t){variationWatchers.push(t);t(variations)}function checkVariationApplied(t){return variations_applied[t]||0}function setAsmtCallback(t){asmtCallback=t}setVariations(window.__ss_variations);document.addEventListener("ready",function(){if(!variations.length){setVariations(window.__ss_variations)}},false);function pauseVariations(){if(is_ve_edit_mode){pause_variations=true}}function unpauseVariations(){if(is_ve_edit_mode){pause_variations=false}}function updateVariationSelector(t){var e=t.identifying_attr_key;var i=t.identifying_attr_val;var a=t.new_selector;if(!is_ve_edit_mode){return}Object.keys(variations).forEach(function(t){var r=variations[t];if(r.attributes&&r.attributes[e]&&r.attributes[e]===i){r.selector=a}})}function isSafeToEdit(t){var e=true;if(variations.length&&!ignore_variation_mutations){var i=t.getAttribute("data-sspvid");if(i){e=variations.some(function(e){if(e.attributes["data-sspvid"]===i){var a=t.getAttribute("data-ss-fe-edit-type")==="frontend_order";return e.custom===""||a}})}}return e}return{applyVariations:applyVariations,applySingleVariation:applySingleVariation,setVariations:setVariations,registerVariationWatcher:registerVariationWatcher,checkVariationApplied:checkVariationApplied,setAsmtCallback:setAsmtCallback,pauseVariations:pauseVariations,unpauseVariations:unpauseVariations,updateVariationSelector:updateVariationSelector,isSafeToEdit:isSafeToEdit}}();(function(){"use strict";function t(t){var e={childList:true,attributes:true,subtree:true};var i;var a;var r;var n=t.callback;var o=document.querySelector("html");if(o){if(window.MutationObserver){a=new MutationObserver(u);i=o;r=a.observe.bind(a,i,e);r()}else{s(o)}}function s(t){t.addEventListener("DOMSubtreeModified",f,false)}function c(t){t.removeEventListener("DOMSubtreeModified",f,false)}function u(){if(a){a.disconnect()}var e=document.querySelectorAll(t.selector);if(e.length>0){n()}if(r){r()}}function f(){c(o);u();s(o)}}ss_dom_var.registerVariationWatcher(function(e){e.forEach(function(e){t({selector:e.selector,callback:ss_dom_var.applySingleVariation.bind(ss_dom_var,e)})})})})();
/* Copyright 2016, SiteSpect, Inc. All Rights Reserved. */
if(!window.SS){window.SS={}}SS.SPA=function(){"use strict";var n=1;var i=document.querySelectorAll.bind(document);function t(t){var o={childList:true,attributes:true};var c;var u;var f="ss-modified-"+n++;var s=e.bind(null,t.dynamicContainer,f);var d;var l=t.callback||t.callbackFunction;if(i(t.staticContainer).length>0){if(window.MutationObserver){if(t.watchSubtree){o.subtree=true}u=new MutationObserver(S);c=i(t.staticContainer)[0];d=u.observe.bind(u,c,o);d()}else{a(i(t.staticContainer),v)}if(t.runCallbackNow){l()}}function v(n){n.addEventListener("DOMSubtreeModified",w,false)}function b(n){n.removeEventListener("DOMSubtreeModified",w,false)}function S(){if(u){u.disconnect()}var n=s(true);if(n.length>0){a(n,r.bind(null,f));l()}if(d){d()}}function w(){a(i(t.staticContainer),b);S();a(i(t.staticContainer),v)}}function e(n,t,e){var a=[n];if(e){a.push(":not(."+t+")")}return i(a.join(""))}function a(n,i){[].forEach.call(n,i)}function r(n,i){if(i.className.indexOf(n)===-1){i.className+=" "+n}}return{dynamicModify:t}}();
